#!/usr/bin/env escript
-import(sudoku, [solve_file/2]).

main(Args) ->
    {ok, sudoku} = compile:file(sudoku),
    {ok, unittests} = compile:file(unittests),
    run_solver(Args).

run_solver([]) ->
    run_solver(["runtests"]),
    run_solver(["solve"]);
run_solver(["runtests"]) ->
    ok = unittests:test(),
    io:format("All tests passed :-)~n");
run_solver(["solve"]) ->
    print_results("easy50.txt", "========"),
    print_results("top95.txt", "\n"),
    print_results("hardest.txt", "\n").

print_results(FileName, Seperator) ->
    io:format("Solutions from ~s:~n", [FileName]),
    print_solutions(solve_file(FileName, Seperator)).

print_solutions([]) ->
    io:format("~n");
print_solutions([Solution|T]) ->
    io:format("~s~n", [Solution]),
    print_solutions(T).
